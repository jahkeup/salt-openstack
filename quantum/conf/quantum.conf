{% set openstack = pillar['openstack'] -%}
{% set quantum = openstack['quantum'] -%}
{% set rabbit = openstack['rabbit'] -%}
[DEFAULT]
{% if openstack.get('logging') -%}
verbose={{ openstack['logging'].get('verbose',False) and 'True' or 'False'}}
debug={{ openstack['logging'].get('debug',False) and 'True' or 'False'}}
{% endif -%}
lock_path = $state_path/lock

root_helper = sudo /usr/bin/quantum-rootwrap /etc/quantum/rootwrap.conf

bind_host = 0.0.0.0
bind_port = {{ quantum['server'].get('port',9696) }}
core_plugin = quantum.plugins.openvswitch.ovs_quantum_plugin.OVSQuantumPluginV2
api_paste_config = /etc/quantum/api-paste.ini
auth_strategy = keystone
control_exchange = quantum
rabbit_host = {{ rabbit['server'] }}
rabbit_password = {{ rabbit['password'] }}
notification_driver = quantum.openstack.common.notifier.rpc_notifier
default_notification_level = INFO
notification_topics = notifications
allow_overlapping_ips=True

[DATABASE]
sql_dbpool_enable=True
sql_connection = {{ openstack['db']['proto'] }}://{{ quantum['db']['username'] }}:{{quantum['db']['password']}}@{{ openstack['db']['server']}}:{{ openstack['db']['port'] }}/{{ quantum['db']['name'] }}

[keystone_authtoken]
admin_tenant_name = {{ openstack['auth']['service'] }}
admin_user = {{ quantum['service']['username'] }}
admin_password = {{ quantum['service']['password'] }}
auth_host = {{ openstack['auth']['server'] }}
auth_port = {{ openstack['auth'].get('port',35357) }}
auth_protocol = {{ openstack['auth'].get('proto','http') }}
signing_dir = /var/lib/quantum/keystone-signing
